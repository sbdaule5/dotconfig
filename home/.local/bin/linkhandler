#! /usr/bin/bash

# Links handler primarily made for use with newsboat
# Inspired from @bugswriter_

if [[ -z $1 ]]; then
	url=$(xsel -ob)
else
	url=$1
fi

case "$url" in
	*mkv|*webp|*mp4|*youtube.com/watch*|*youtube.com/playlist*|*youtube.com/shorts*|*youtu.be*|*videos.lukesmith.xyz*|*odysee.com*)
		setsid -f mpv --ytdl-format="bestaudio+bestvideo[height<=240]" "$url" > /dev/null 2>&1 ;;
	*png|*jpg|*jpeg|*jpe)
		feh "$url" ;;
	*)
		readable -o /tmp/newsboat_article.html > /dev/null 2>&1 \
		&& setsid -f qutebrowser /tmp/newsboat_article.html > /dev/null 2>&1 ;;
esac
